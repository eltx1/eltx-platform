'use client';

import { createContext, useContext, useEffect, useState } from 'react';

export type Lang = 'en' | 'ar';

export const dict = {
  en: {
    site_title: 'ELTX',
    hero_title: 'Welcome to ELTX',
    hero_sub: 'Fast and secure transactions.',
    auth: {
      signup: {
        title: 'Sign Up',
        success: 'Account created successfully. Please sign in.',
        exists: 'Email or username already exists.',
        genericError: 'Something went wrong. Please try again.',
        ready: 'Your account is ready. Sign in now.',
      },
      login: {
        title: 'Login',
        success: 'Welcome back!',
        invalid: 'Invalid email/username or password.',
        genericError: 'Something went wrong. Please try again.',
      },
    },
    dashboard: {
      title: 'Dashboard',
      balanceCard: {
        title: 'ELTX Balance',
        empty: 'No ELTX balance yet.',
        change24h: '24h change',
        lastMovement: 'Last activity',
        noChange: 'No change',
        noMovement: 'No recent activity',
      },
      cards: {
        wallet: { title: 'Wallet', subtitle: 'Deposit BNB, view address' },
        transactions: { title: 'Transactions', subtitle: 'Recent deposits' },
        trade: { title: 'Trade', subtitle: 'Swap to ELTX' },
        spotTrade: { title: 'Spot trade', subtitle: 'Order book trading' },
        faq: { title: 'FAQ', subtitle: '' },
        settings: { title: 'Settings', subtitle: '' },
        partners: { title: 'Partners', subtitle: '' },
      },
    },
    wallet: {
      title: 'Wallet',
      chainLabel: 'BNB Smart Chain (BSC) — Mainnet (56)',
      addressLabel: 'Deposit Address',
      copy: 'Copy',
      copied: 'Copied',
      qr: 'QR Code',
      chainNames: {
        bsc: 'BNB Smart Chain (BSC) — Mainnet (56)',
        eth: 'Ethereum — Mainnet (1)',
      },
      filters: {
        all: 'All networks',
        network: 'Network',
        unknown: 'Off-chain',
      },
      assetsTitle: 'Assets',
      searchPlaceholder: 'Search assets…',
      noFilteredAssets: 'No assets match your filters.',
      change24h: '24h change',
      lastMovement: 'Last movement',
      noMovement: 'No activity yet',
      transactions: 'Transactions',
      transfer: {
        to: 'Transfer to',
        from: 'Transfer from',
        sent: 'Sent',
        received: 'Received',
      },
      table: {
        time: 'Time',
        hash: 'Tx Hash',
        amount: 'Amount',
        confirms: 'Confirmations',
        status: {
          pending: 'Pending',
          confirmed: 'Confirmed',
          orphaned: 'Orphaned',
        },
      },
    },
    transactions: {
      title: 'Transactions',
      filter: {
        all: 'All',
        pending: 'Pending',
        confirmed: 'Confirmed',
      },
    },
    pay: {
      title: 'Pay',
      to: 'Recipient User ID',
      asset: 'Asset',
      amount: 'Amount',
      send: 'Send',
      balance: 'Balance',
      insufficient: 'Insufficient balance',
      success: 'Transfer complete',
    },
    trade: {
      title: 'ELTX Swap',
      description: 'Convert supported assets to ELTX at our internal rate.',
      youPay: 'You pay',
      youReceive: 'You receive',
      useMax: 'Use max',
      liveRate: 'Live rate',
      rateLabel: 'Conversion rate',
      estimated: 'Estimated {amount}',
      awaitingAmount: 'Enter an amount to preview your ELTX.',
      assetsAvailable: 'Available assets: {assets}',
      lastUpdated: 'Updated {time} ago',
      signInRequired: 'Sign in to access ELTX Swap.',
      asset: 'Asset',
      amount: 'Amount',
      balance: 'Available',
      min: 'Minimum',
      max: 'Maximum',
      getQuote: 'Get quote',
      loading: 'Loading…',
      submitting: 'Submitting…',
      confirm: 'Confirm swap',
      success: 'Swap completed successfully.',
      pricing: 'Live pricing sourced from CoinGecko and the ELTX internal engine.',
      noAssets: 'No assets available for swap yet.',
      quote: {
        title: 'Quote details',
        rate: 'Rate',
        youSend: 'You send',
        youReceive: 'You receive',
        locked: 'Quote locked in',
        expiresIn: 'Expires in',
        expiresInShort: 'Expires in {seconds}s',
        expiredShort: 'Quote expired',
        expired: 'Quote expired. Request a new quote.',
        spread: 'Spread applied',
        needsRefresh: 'Amount or asset changed. Request a new quote.',
        platformFee: 'Platform fee',
        feeRate: 'Fee {bps} bps',
      },
      errors: {
        amountRequired: 'Enter an amount to continue.',
        invalidAmount: 'Amount is invalid.',
        amountTooSmall: 'Amount is below the minimum.',
        amountTooLarge: 'Amount exceeds the maximum.',
        insufficientBalance: 'Insufficient balance for this swap.',
        quoteExpired: 'Quote expired. Request a new one.',
        quoteRequired: 'Request a quote before confirming.',
        unsupportedAsset: 'Asset is not supported for swap.',
        quoteStale: 'Quote no longer matches your selection. Request a new quote.',
        quoteUnavailable: 'Quote is no longer available. Request a new one.',
        pricingUnavailable: 'Pricing temporarily unavailable. Please try again shortly.',
      },
    },
    spotTrade: {
      title: 'Spot trade',
      subtitle: 'Centralized order book trading for ELTX pairs.',
      market: 'Market',
      side: 'Side',
      type: 'Order type',
      amount: 'Amount',
      price: 'Price',
      lastPrice: 'Last price',
      buy: 'Buy',
      sell: 'Sell',
      limit: 'Limit',
      marketOrder: 'Market',
      placeOrder: 'Place order',
      placing: 'Placing…',
      cancel: 'Cancel order',
      orderbook: { title: 'Order book', bids: 'Bids', asks: 'Asks' },
      chart: {
        title: 'Price chart',
        empty: 'No trades yet to chart.',
        timeframes: { '5m': '5m', '1h': '1H', '1d': '1D' },
        modes: { line: 'Line', candles: 'Candles' },
        updated: 'Updated',
        updatedNever: 'Waiting for first trade…',
      },
      trades: { title: 'Recent trades', empty: 'No trades yet.' },
      orders: {
        title: 'Your orders',
        empty: 'No orders yet.',
        status: { open: 'Open', filled: 'Filled', cancelled: 'Cancelled' },
      },
      notifications: {
        placed: 'Order placed successfully.',
        cancelled: 'Order cancelled.',
      },
      errors: {
        marketRequired: 'Select a market first.',
        amountRequired: 'Enter an amount.',
        priceRequired: 'Enter a price for limit orders.',
        failed: 'Unable to place order. Please try again.',
      },
    },
    nav: {
      home: 'Home',
      faq: 'FAQ',
      login: 'Sign In',
      signup: 'Sign Up',
      dashboard: 'Dashboard',
      trade: 'Trade',
      earn: 'Earn',
      wallet: 'Wallet',
      transactions: 'Transactions',
      settings: 'Settings',
      logout: 'Logout',
      language: 'Language',
    },
    footer: {
      about: 'About',
      docs: 'Docs',
      terms: 'Terms',
      privacy: 'Privacy',
      status: 'Status',
      contact: 'Contact',
      tagline: 'The utility token platform.',
    },
    pages: {
      about: 'ELTX is a utility token platform.',
      docs: 'Documentation coming soon.',
      terms: 'Terms of service placeholder.',
      privacy: 'Privacy policy placeholder.',
      status: 'All systems operational.',
    },
    contact: {
      email: 'Email',
      message: 'Message',
      send: 'Send',
      success: 'Message sent!',
    },
    accountDeletion: {
      title: 'Account Deletion Request',
      email: 'Email',
      userId: 'User ID',
      reason: 'Reason for deletion',
      message: 'Message',
      confirm: 'I confirm that I want to delete my account from the ELTX platform',
      send: 'Submit request',
      success: 'Request sent!',
    },
    audience: {
      title: 'Who we serve',
      governments: {
        title: 'Governments',
        desc: 'Secure infrastructure for public services.',
      },
      companies: {
        title: 'Companies',
        desc: 'Tools for enterprises and startups.',
      },
      individuals: {
        title: 'Individuals',
        desc: 'Simple payments for everyone.',
      },
    },
    common: {
      soon: 'Soon',
      genericError: 'Something went wrong. Please try again.',
      copy: 'Copy',
      copied: 'Copied',
      userId: 'User ID',
      deposit: 'Deposit',
    },
    errors: {
      userExists: 'Email or username already exists.',
      invalid: 'Invalid email/username or password.',
      generic: 'Something went wrong. Please try again.',
    },
  },
  ar: {
    site_title: 'ELTX',
    hero_title: 'مرحبًا بك في ELTX',
    hero_sub: 'معاملات سريعة وآمنة.',
    auth: {
      signup: {
        title: 'إنشاء حساب',
        success: 'تم إنشاء الحساب بنجاح. برجاء تسجيل الدخول.',
        exists: 'البريد الإلكتروني أو اسم المستخدم موجود بالفعل.',
        genericError: 'حدث خطأ. برجاء المحاولة مرة أخرى.',
        ready: 'تم تجهيز حسابك. سجّل الدخول الآن.',
      },
      login: {
        title: 'تسجيل الدخول',
        success: 'مرحبًا بعودتك!',
        invalid: 'البريد الإلكتروني/اسم المستخدم أو كلمة المرور غير صحيحة.',
        genericError: 'حدث خطأ. برجاء المحاولة مرة أخرى.',
      },
    },
    dashboard: {
      title: 'لوحة التحكم',
      balanceCard: {
        title: 'رصيد ELTX',
        empty: 'لا يوجد رصيد ELTX بعد.',
        change24h: 'تغير ٢٤ ساعة',
        lastMovement: 'آخر حركة',
        noChange: 'لا تغير',
        noMovement: 'لا نشاط حديث',
      },
      cards: {
        wallet: { title: 'المحفظة', subtitle: 'إيداع BNB، عرض العنوان' },
        transactions: { title: 'الإيداعات', subtitle: 'آخر الإيداعات' },
        trade: { title: 'التداول', subtitle: 'حوّل أصولك إلى ELTX' },
        spotTrade: { title: 'تداول فوري', subtitle: 'دفتر أوامر مركزي' },
        faq: { title: 'الأسئلة الشائعة', subtitle: '' },
        settings: { title: 'الإعدادات', subtitle: '' },
        partners: { title: 'الشركاء', subtitle: '' },
      },
    },
    wallet: {
      title: 'المحفظة',
      chainLabel: 'سلسلة بينانس الذكية (BSC) — الشبكة الرئيسية (56)',
      addressLabel: 'عنوان الإيداع',
      copy: 'نسخ',
      copied: 'تم النسخ',
      qr: 'رمز QR',
      chainNames: {
        bsc: 'سلسلة بينانس الذكية (BSC) — الشبكة الرئيسية (56)',
        eth: 'إيثيريوم — الشبكة الرئيسية (1)',
      },
      filters: {
        all: 'كل الشبكات',
        network: 'شبكة',
        unknown: 'خارج السلسلة',
      },
      assetsTitle: 'الأصول',
      searchPlaceholder: 'ابحث عن الأصول…',
      noFilteredAssets: 'لا توجد أصول مطابقة للمرشحات.',
      change24h: 'تغير ٢٤ ساعة',
      lastMovement: 'آخر حركة',
      noMovement: 'لا يوجد نشاط بعد',
      transactions: 'المعاملات',
      transfer: {
        to: 'تحويل إلى',
        from: 'تحويل من',
        sent: 'تم الإرسال',
        received: 'تم الاستلام',
      },
      table: {
        time: 'الوقت',
        hash: 'معرّف المعاملة',
        amount: 'المبلغ',
        confirms: 'التأكيدات',
        status: {
          pending: 'معلق',
          confirmed: 'مؤكد',
          orphaned: 'ملغى',
        },
      },
    },
    transactions: {
      title: 'الإيداعات',
      filter: {
        all: 'الكل',
        pending: 'معلق',
        confirmed: 'مؤكد',
      },
    },
    pay: {
      title: 'الدفع',
      to: 'معرّف المستخدم للمستلم',
      asset: 'الأصل',
      amount: 'الكمية',
      send: 'إرسال',
      balance: 'الرصيد',
      insufficient: 'الرصيد غير كافٍ',
      success: 'تم التحويل',
    },
    trade: {
      title: 'تحويل ELTX',
      description: 'حوّل الأصول المدعومة إلى ELTX بالتسعير الداخلي لدينا.',
      youPay: 'ستدفع',
      youReceive: 'ستستلم',
      useMax: 'استخدم الكل',
      liveRate: 'السعر المباشر',
      rateLabel: 'سعر التحويل',
      estimated: 'تقديري {amount}',
      awaitingAmount: 'أدخل قيمة لمعاينة كمية ELTX.',
      assetsAvailable: 'الأصول المتاحة: {assets}',
      lastUpdated: 'آخر تحديث منذ {time}',
      signInRequired: 'سجّل الدخول علشان تستخدم تحويل ELTX.',
      asset: 'الأصل',
      amount: 'القيمة',
      balance: 'المتاح',
      min: 'الحد الأدنى',
      max: 'الحد الأقصى',
      getQuote: 'احصل على تسعير',
      loading: 'جاري التحميل…',
      submitting: 'جاري التنفيذ…',
      confirm: 'تأكيد التحويل',
      success: 'تم تنفيذ التحويل بنجاح.',
      pricing: 'يتم جلب الأسعار مباشرةً من CoinGecko ومحرك التسعير الداخلي لـ ELTX.',
      noAssets: 'لا توجد أصول متاحة للتحويل حاليًا.',
      quote: {
        title: 'تفاصيل التسعير',
        rate: 'السعر',
        youSend: 'سترسل',
        youReceive: 'ستستلم',
        locked: 'تم تثبيت التسعير',
        expiresIn: 'ينتهي خلال',
        expiresInShort: 'ينتهي خلال {seconds} ث',
        expiredShort: 'انتهى التسعير',
        expired: 'انتهت صلاحية التسعير. اطلب تسعيرًا جديدًا.',
        spread: 'هامش التسعير',
        needsRefresh: 'غيّرت الأصل أو القيمة. اطلب تسعير جديد.',
        platformFee: 'رسوم المنصة',
        feeRate: 'رسوم {bps} نقطة أساس',
      },
      errors: {
        amountRequired: 'أدخل قيمة أولًا.',
        invalidAmount: 'القيمة غير صحيحة.',
        amountTooSmall: 'القيمة أقل من الحد الأدنى.',
        amountTooLarge: 'القيمة تتجاوز الحد الأقصى.',
        insufficientBalance: 'الرصيد غير كافٍ لإتمام التحويل.',
        quoteExpired: 'انتهت صلاحية التسعير. اطلب تسعيرًا جديدًا.',
        quoteRequired: 'اطلب تسعيرًا قبل التأكيد.',
        unsupportedAsset: 'الأصل غير مدعوم للتحويل.',
        quoteStale: 'التسعير مبقاش مطابق لاختياراتك. اطلب تسعير جديد.',
        quoteUnavailable: 'التسعير دا مبقاش متاح. اطلب تسعير جديد.',
        pricingUnavailable: 'التسعير غير متاح مؤقتًا. حاول مرة أخرى لاحقًا.',
      },
    },
    spotTrade: {
      title: 'التداول الفوري',
      subtitle: 'دفتر أوامر مركزي لأزواج ELTX.',
      market: 'السوق',
      side: 'الاتجاه',
      type: 'نوع الأمر',
      amount: 'الكمية',
      price: 'السعر',
      lastPrice: 'آخر سعر',
      buy: 'شراء',
      sell: 'بيع',
      limit: 'محدد',
      marketOrder: 'سوق',
      placeOrder: 'تنفيذ الأمر',
      placing: 'جاري التنفيذ…',
      cancel: 'إلغاء الأمر',
      orderbook: { title: 'دفتر الأوامر', bids: 'طلبات الشراء', asks: 'طلبات البيع' },
      chart: {
        title: 'الرسم البياني للسعر',
        empty: 'لا توجد تداولات بعد لعرض الرسم.',
        timeframes: { '5m': '٥ د', '1h': '١ س', '1d': '١ يوم' },
        modes: { line: 'خط', candles: 'شموع' },
        updated: 'آخر تحديث',
        updatedNever: 'بانتظار أول صفقة…',
      },
      trades: { title: 'آخر الصفقات', empty: 'لا توجد تداولات بعد.' },
      orders: {
        title: 'أوامرك',
        empty: 'لا توجد أوامر بعد.',
        status: { open: 'مفتوح', filled: 'مكتمل', cancelled: 'ملغى' },
      },
      notifications: {
        placed: 'تم تنفيذ الأمر بنجاح.',
        cancelled: 'تم إلغاء الأمر.',
      },
      errors: {
        marketRequired: 'يرجى اختيار السوق.',
        amountRequired: 'أدخل الكمية.',
        priceRequired: 'أدخل السعر في أوامر المحدد.',
        failed: 'تعذر تنفيذ الأمر. حاول مجددًا.',
      },
    },
    nav: {
      home: 'الرئيسية',
      faq: 'الأسئلة الشائعة',
      login: 'تسجيل الدخول',
      signup: 'إنشاء حساب',
      dashboard: 'لوحة التحكم',
      trade: 'تداول',
      earn: 'اربح',
      wallet: 'المحفظة',
      transactions: 'الإيداعات',
      settings: 'الإعدادات',
      logout: 'تسجيل الخروج',
      language: 'اللغة',
    },
    footer: {
      about: 'حول',
      docs: 'المستندات',
      terms: 'الشروط',
      privacy: 'الخصوصية',
      status: 'الحالة',
      contact: 'اتصل بنا',
      tagline: 'منصة التوكنات الخدمية.',
    },
    pages: {
      about: 'ELTX هي منصة للتوكنات الخدمية.',
      docs: 'التوثيق قادم قريبًا.',
      terms: 'نموذج شروط الخدمة.',
      privacy: 'نموذج سياسة الخصوصية.',
      status: 'جميع الأنظمة تعمل.',
    },
    contact: {
      email: 'البريد الإلكتروني',
      message: 'الرسالة',
      send: 'إرسال',
      success: 'تم إرسال الرسالة!',
    },
    accountDeletion: {
      title: 'طلب حذف الحساب',
      email: 'البريد الإلكتروني',
      userId: 'معرف المستخدم',
      reason: 'سبب طلب الحذف',
      message: 'الرسالة',
      confirm: 'أؤكد أنني أريد حذف حسابي من منصة ELTX',
      send: 'إرسال الطلب',
      success: 'تم إرسال الطلب!',
    },
    audience: {
      title: 'الفئات المستهدفة',
      governments: {
        title: 'الحكومات',
        desc: 'بنية آمنة للخدمات العامة.',
      },
      companies: {
        title: 'الشركات',
        desc: 'أدوات للمؤسسات والشركات الناشئة.',
      },
      individuals: {
        title: 'الأفراد',
        desc: 'مدفوعات سهلة للجميع.',
      },
    },
    common: {
      soon: 'قريبًا',
      genericError: 'حدث خطأ. برجاء المحاولة مرة أخرى.',
      copy: 'نسخ',
      copied: 'تم النسخ',
      userId: 'معرّف المستخدم',
      deposit: 'إيداع',
    },
    errors: {
      userExists: 'البريد الإلكتروني أو اسم المستخدم موجود بالفعل.',
      invalid: 'بيانات الدخول غير صحيحة.',
      generic: 'حدث خطأ. برجاء المحاولة مرة أخرى.',
    },
  },
} as const;

const LangContext = createContext<{ lang: Lang; setLang: (l: Lang) => void }>({ lang: 'en', setLang: () => {} });

export function LangProvider({ children }: { children: React.ReactNode }) {
  const [lang, setLang] = useState<Lang>('en');
  useEffect(() => {
    const stored = (typeof window !== 'undefined' && localStorage.getItem('lang')) as Lang | null;
    if (stored) setLang(stored);
  }, []);
  useEffect(() => {
    if (typeof document !== 'undefined') {
      document.documentElement.lang = lang;
      document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
    }
    if (typeof window !== 'undefined') localStorage.setItem('lang', lang);
  }, [lang]);
  return <LangContext.Provider value={{ lang, setLang }}>{children}</LangContext.Provider>;
}

export function useLang() {
  return useContext(LangContext);
}
